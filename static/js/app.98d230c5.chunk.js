(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{125:function(e,t,n){e.exports=n(157)},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(16),o=n.n(r),s=n(58),a=n.n(s),c=n(27),u=n.n(c),i=n(124),p=n(3),l=n(7),f=n(0),b=n(62),m=n(85),d=n(2);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(){var e=Object(f.useState)([]),t=a()(e,2),n=t[0],r=t[1],o=Object(f.useState)(!0),s=a()(o,2),c=s[0],O=s[1];Object(f.useEffect)((function(){var e=!1;return function(){var t,n;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!e){o.next=2;break}return o.abrupt("return");case 2:return o.next=4,u.a.awrap(m.a.getItem("@messages"));case 4:t=o.sent,n=JSON.parse(t||"[]"),console.log("useEffect:reload",t),n.length?r(n):r([{_id:"1",text:"Let's  begin!",createdAt:new Date,user:{_id:"2",name:"Kayleen",avatar:"https://placeimg.com/140/140/tech"}}]);case 8:case"end":return o.stop()}}),null,null,null,Promise)}().catch((function(e){return console.error(e)})),function(){e=!0}}),[]),Object(f.useEffect)((function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("useEffect:update",n),e.next=3,u.a.awrap(m.a.setItem("@messages",JSON.stringify(n)));case 3:case"end":return e.stop()}}),null,null,null,Promise).catch((function(e){return console.error(e)})),function(){!0}}),[n]);var y=function(e){var t,n,o;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return O(!0),s.prev=1,t=e[0],s.next=5,u.a.awrap(fetch("https://5ucgrx57li.execute-api.us-east-2.amazonaws.com/live/completion",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prompt:t.text,max_tokens:24,temperature:.9,top_p:.3,frequency_penalty:.5,presence_penalty:0,user:"1"})}));case 5:return n=s.sent,s.next=8,u.a.awrap(n.json());case 8:o=s.sent,console.info("newCompletion",o),r((function(e){return b.b.append(e,[{_id:String(Math.random()*Math.random()).substr(2),text:(o.body.choices[0].text||"").trim(),createdAt:new Date,user:{_id:"2",name:"Kayleen",avatar:"https://placeimg.com/140/140/tech"}}])})),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(1),s.t0.response?console.error("newCompletion",s.t0.response.status,s.t0.response.data):console.error("newCompletion",s.t0.message);case 16:return s.prev=16,O(!1),s.finish(16);case 19:case"end":return s.stop()}}),null,null,[[1,13,16,19]],Promise)},g=Object(f.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onSend",JSON.stringify(e)),r((function(t){return b.b.append(t,e)})),t.next=4,u.a.awrap(y(e));case 4:case"end":return t.stop()}}),null,null,null,Promise)}),[]),v=function(e){e.text&&e.onSend&&e.onSend({text:e.text.trim()},!0)};return Object(d.jsxs)(p.a,{style:{flex:1,backgroundColor:"#fff"},children:[Object(d.jsx)(b.b,{messages:n,isTyping:c,onSend:function(e){return g(e)},user:{_id:"1",name:"Me",avatar:"https://placeimg.com/140/140/people"},showUserAvatar:!0,showAvatarForEveryMessage:!0,renderUsernameOnMessage:!0,renderComposer:function(e){return Object(d.jsx)(b.a,h(h({},e),{},{textInputProps:h(h({},e.textInputProps),{},{onKeyPress:function(t){return"Enter"==t.nativeEvent.key?v(e):void 0},blurOnSubmit:"web"===l.a.OS,onSubmitEditing:"web"===l.a.OS?function(){return v(e)}:void 0})}))}}),Object(d.jsx)(i.a,{style:"auto"})]})}}},[[125,1,2]]]);
//# sourceMappingURL=app.98d230c5.chunk.js.map