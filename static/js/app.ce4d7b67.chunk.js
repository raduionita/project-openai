(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{126:function(e,t,n){e.exports=n(158)},95:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(58),r=n.n(a),s=n(27),o=n.n(s),c=n(125),u=n(3),i=n(73),p=n(9),l=n(0),f=n(79),d=n(86),m=n(2);function h(){var e=Object(l.useState)([]),t=r()(e,2),n=t[0],a=t[1],s=Object(l.useState)(!0),h=r()(s,2),g=h[0],x=h[1];Object(l.useEffect)((function(){var e=!1;return function(){var t,n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,o.a.awrap(d.a.getItem("@messages"));case 4:t=r.sent,n=JSON.parse(t||"[]"),console.log("useEffect:reload",t),n.length?a(n):a([{_id:"1",text:"Let's  begin!",createdAt:new Date,user:{_id:"2",name:"Kayleen",avatar:"https://placeimg.com/140/140/tech"}}]);case 8:case"end":return r.stop()}}),null,null,null,Promise)}().catch((function(e){return console.error(e)})),function(){e=!0}}),[]),Object(l.useEffect)((function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("useEffect:update",n),e.next=3,o.a.awrap(d.a.setItem("@messages",JSON.stringify(n)));case 3:case"end":return e.stop()}}),null,null,null,Promise).catch((function(e){return console.error(e)})),function(){!0}}),[n]);var v=function(e){var t,n,r;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return x(!0),s.prev=1,t=e[0],s.next=5,o.a.awrap(fetch("https://5ucgrx57li.execute-api.us-east-2.amazonaws.com/live/completion",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prompt:t.text,max_tokens:24,temperature:.9,top_p:.3,frequency_penalty:.5,presence_penalty:0,user:"1"})}));case 5:return n=s.sent,s.next=8,o.a.awrap(n.json());case 8:r=s.sent,console.info("newCompletion",r),a((function(e){return f.a.append(e,[{_id:String(Math.random()*Math.random()).substr(2),text:(r.body.choices[0].text||"").trim(),createdAt:new Date,user:{_id:"2",name:"Kayleen",avatar:"https://placeimg.com/140/140/tech"}}])})),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(1),s.t0.response?console.error("newCompletion",s.t0.response.status,s.t0.response.data):console.error("newCompletion",s.t0.message);case 16:return s.prev=16,x(!1),s.finish(16);case 19:case"end":return s.stop()}}),null,null,[[1,13,16,19]],Promise)},b=Object(l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onSend",JSON.stringify(e)),a((function(t){return f.a.append(t,e)})),t.next=4,o.a.awrap(v(e));case 4:case"end":return t.stop()}}),null,null,null,Promise)}),[]);return Object(m.jsxs)(u.a,{style:{flex:1,backgroundColor:"#fff"},children:[Object(m.jsx)(f.a,{messages:n,isTyping:g,onSend:function(e){return b(e)},user:{_id:"1",name:"Me",avatar:"https://placeimg.com/140/140/people"},showUserAvatar:!0,showAvatarForEveryMessage:!0,renderUsernameOnMessage:!0}),"android"===p.a.OS&&Object(m.jsx)(i.a,{behavior:"padding"}),Object(m.jsx)(c.a,{style:"auto"})]})}}},[[126,1,2]]]);
//# sourceMappingURL=app.ce4d7b67.chunk.js.map